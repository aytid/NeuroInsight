import streamlit as st
import numpy as np
import tensorflow as tf
from tensorflow.keras.models import load_model

def main():

    st.title('Action Prediction')
    ip = []
    for i in range(1, 5):
        ip.append(st.number_input(f'f{i}', value=0.0))
    
    if st.button('Predict'): 
        #foot
        #input_values_str = "57.913602,-54.935369,0.073951,112.848971,388,56,343.840037,82.760294,-55.897257,-0.065391,138.657551,373,54,493.653785,51.350061,-64.632757,-0.176859,115.982818,346,62,444.690932,80.891596,-94.901798,0.085708,175.793394,390,63,1217.524467,66.755320,-64.877032,0.215061,131.632352,384,66,729.377362,44.646988,-43.688947,0.124935,88.335935,375,98,327.914956,53.276360,-47.154791,0.001349,100.431150,367,92,290.009744,50.464478,-54.022422,0.008011,104.486900,379,95,340.156605,66.761342,-69.253095,0.042885,136.014437,382,84,567.947747,142.831274,-157.202643,0.229899,300.033916,380,102,2385.568669,47.206659,-45.520182,0.075748,92.726840,368,149,184.032647,31.582497,-32.474622,-0.003029,64.057119,371,148,140.294822,48.628111,-51.441928,-0.034061,100.070039,377,147,245.356005,83.903468,-85.327694,-0.005229,169.231161,379,155,581.137964,114.802089,-110.339917,-0.072555,225.142006,370,152,1573.091917,30.840170,-29.253049,0.129179,60.093219,370,55,152.837854,37.364153,-42.797410,0.020868,80.161563,387,56,223.551725,31.217108,-35.827985,-0.028698,67.045093,384,62,162.556075,45.590704,-36.553442,-0.239620,82.144145,373,56,160.212512,53.535322,-45.938517,0.172716,99.473839,382,64,350.993423,21.680902,-25.344793,0.034072,47.025696,383,96,76.668753,36.684674,-40.113295,0.034092,76.797970,369,94,172.083701,39.111119,-42.487974,0.003956,81.599093,379,92,187.743740,38.857387,-30.600720,-0.093258,69.458108,368,98,141.220320,51.132467,-54.450069,0.194492,105.582536,374,96,433.312483,20.587543,-23.043995,0.001134,43.631538,372,149,73.799442,30.023151,-32.908085,0.022159,62.931236,373,144,101.524427,29.616972,-33.091908,0.052067,62.708880,380,144,95.092249,47.374736,-46.884101,-0.035652,94.258838,368,146,176.493575,44.917909,-47.572001,0.059197,92.489910,376,159,311.434977,85.141563,-90.700290,0.098929,175.841853,376,65,1440.021940,75.096227,-73.331193,-0.026355,148.427421,375,66,1280.483066,89.671916,-99.666875,0.129034,189.338791,379,67,1937.066430,60.664642,-55.718133,-0.034141,116.382775,370,57,275.669440,93.774012,-92.610334,-0.134738,186.384346,371,65,1811.532574,53.789455,-61.366777,-0.003727,115.156233,365,72,520.394197,50.701054,-55.330446,0.030687,106.031500,376,75,468.092457,63.695883,-65.151006,0.057489,128.846889,385,71,722.757844,32.560448,-39.845991,0.007672,72.406439,385,89,122.947198,70.879368,-67.807591,-0.044211,138.686959,381,76,671.099536,35.164990,-37.696851,-0.034729,72.861841,378,139,218.946008,37.424390,-36.410090,-0.016674,73.834480,374,149,167.360614,37.773309,-36.632389,-0.004106,74.405698,375,146,148.434235,31.005985,-30.992843,-0.031992,61.998829,377,152,98.975790,50.755075,-49.206885,0.005980,99.961960,380,153,261.568902,24.413305,-20.281045,-0.112822,44.694350,361,68,46.096141,52.761391,-48.120016,-0.056887,100.881407,372,62,416.096808,86.636582,-84.825791,0.041165,171.462372,376,66,1658.382416,45.940159,-48.157392,-0.057219,94.097550,360,63,259.868534,87.450983,-78.750596,-0.185205,166.201579,371,67,1637.679279,27.390254,-24.253408,-0.025969,51.643663,367,102,96.475564,40.586178,-39.487336,-0.027533,80.073514,356,76,170.144114,62.812991,-47.562154,-0.022613,110.375145,339,71,592.809751,35.799705,-36.167125,-0.019371,71.966830,381,87,193.937645,66.050778,-55.007127,-0.024778,121.057905,352,75,664.296825,27.713754,-26.605507,-0.013751,54.319261,373,152,93.216917,31.878136,-28.577299,-0.011099,60.455435,367,148,96.990590,41.404114,-42.427898,0.001706,83.832012,378,144,224.135487,35.547986,-36.592684,-0.039194,72.140670,371,155,204.180049,45.492404,-46.312601,0.029170,91.805005,375,142,243.906083,68.738010,-68.877658,-0.003692,137.615668,358,59,631.594018,114.194405,-115.651201,-0.086926,229.845605,380,67,2235.902344,109.215949,-104.491962,-0.062578,213.707911,372,66,2109.373840,123.417776,-115.643390,-0.156982,239.061166,362,63,2309.629145,111.192918,-105.220847,0.080959,216.413765,393,62,1499.205516,54.892753,-61.571599,0.065385,116.464351,383,84,396.373053,75.644428,-82.784184,-0.042302,158.428612,383,73,898.294778,72.284055,-72.641066,0.102552,144.925121,389,76,893.480003,87.796632,-73.084401,-0.096346,160.881033,381,80,936.572748,71.456451,-74.691813,0.056397,146.148264,365,89,680.429622,54.650608,-52.224879,0.027420,106.875488,372,148,244.400563,44.744257,-45.826358,-0.004091,90.570615,372,138,222.337855,53.301923,-57.428231,0.059812,110.730154,378,138,475.033317,55.471986,-56.687306,0.020029,112.159293,371,144,307.456721,55.220204,-51.976628,-0.002274,107.196831,384,142,319.576606"
        #left-hand
        #input_values_str = "71.737502,-61.336101,0.049546,133.073603,378,61,486.200779,56.480862,-51.212381,-0.026081,107.693243,385,58,501.475580,213.320552,-222.427796,-0.717309,435.748348,365,63,5106.843761,132.624583,-120.219000,0.244559,252.843583,376,63,1909.527940,78.883875,-79.619949,0.140509,158.503824,380,65,756.818024,45.071043,-50.683099,-0.016771,95.754142,373,92,331.534164,43.904730,-47.729325,-0.014296,91.634055,364,89,292.309706,146.656264,-117.683984,-0.110647,264.340248,364,88,1709.403804,93.870901,-115.983620,-0.009909,209.854521,369,93,938.695840,83.585761,-94.044712,0.107843,177.630473,377,99,1154.912049,46.123152,-45.542940,0.030455,91.666093,384,154,190.631661,45.493426,-43.322512,0.002932,88.815938,378,150,218.250275,88.994410,-89.643505,0.025581,178.637915,382,140,885.935913,70.412697,-74.030567,0.053552,144.443265,382,138,553.975971,74.848729,-84.615492,-0.012818,159.464221,377,153,845.724332,77.803482,-82.888750,-0.268545,160.692232,369,52,350.950964,70.997746,-70.746979,-0.105767,141.744725,378,66,484.996684,71.894838,-69.998832,0.048834,141.893670,370,59,541.977506,39.197937,-44.254072,0.103141,83.452009,367,59,296.570827,43.868156,-44.582025,0.026985,88.450181,358,64,264.423314,58.288040,-64.613188,-0.097056,122.901228,367,92,172.542194,51.488883,-40.385886,0.013416,91.874769,390,88,227.821685,63.933857,-51.944493,0.036617,115.878350,373,95,244.405007,34.271721,-38.549494,0.033127,72.821215,385,93,195.003315,52.580648,-57.263303,0.069657,109.843951,378,104,333.998569,43.810767,-41.544450,-0.050003,85.355216,372,145,113.272834,37.925471,-38.163549,0.022528,76.089020,381,141,166.813952,33.688941,-31.658019,-0.003732,65.346961,385,140,112.674426,41.147802,-39.718318,0.003005,80.866121,373,146,106.153017,52.030758,-46.627342,-0.004672,98.658100,377,148,311.483941,89.315178,-93.453112,0.158865,182.768290,378,65,2064.709352,116.918898,-120.935930,-0.165853,237.854828,374,62,2197.627459,132.637965,-139.125523,0.536777,271.763488,370,64,2869.846007,79.742570,-88.734577,-0.132650,168.477147,374,61,1043.027030,69.488517,-69.503143,-0.187841,138.991660,373,65,1036.116887,67.497954,-62.834443,-0.022727,130.332397,380,82,758.773153,77.369144,-64.946217,0.030568,142.315361,387,74,627.300837,79.857604,-101.865833,0.228568,181.723437,374,85,890.703568,54.016332,-45.602039,-0.050164,99.618370,380,88,355.406948,53.128098,-63.770355,0.012526,116.898453,384,88,461.127227,50.210720,-48.745939,-0.008655,98.956659,376,135,426.154958,60.232278,-60.760849,0.029175,120.993126,368,138,268.656992,46.161984,-50.552708,0.044560,96.714692,381,136,303.849567,36.086748,-36.808760,0.003927,72.895508,383,136,181.070394,45.218685,-44.644772,-0.083768,89.863457,379,142,301.049282,16.766294,-16.355086,0.050144,33.121380,367,55,33.516244,85.559972,-80.385526,-0.173447,165.945498,372,63,989.725410,117.510480,-108.505918,-0.090975,226.016398,368,65,2570.621809,46.450280,-38.637860,-0.001074,85.088140,373,63,207.878492,96.499018,-89.580706,-0.079198,186.079725,376,64,1488.637549,13.380066,-11.951593,-0.000742,25.331659,374,94,23.421237,57.013076,-37.150440,-0.054696,94.163516,327,73,326.183560,84.619954,-70.441180,-0.017389,155.061134,326,68,891.679668,31.371480,-26.201088,0.023891,57.572567,372,85,97.029555,79.023186,-59.373105,-0.134688,138.396291,345,87,582.173405,11.925614,-11.209686,0.000510,23.135299,372,149,17.232865,40.043978,-38.190648,-0.004920,78.234625,386,142,152.859357,51.033119,-46.949241,0.042156,97.982360,379,131,361.412831,21.705865,-19.179976,-0.010575,40.885841,369,142,47.084569,53.149931,-55.305754,-0.060724,108.455685,381,134,310.066910,125.873621,-131.315218,-0.017575,257.188839,373,59,1817.354008,210.395048,-218.840080,-0.478228,429.235128,383,60,5139.820270,168.780100,-179.428296,-0.428365,348.208396,370,63,5027.557107,137.377200,-132.704716,-0.009853,270.081916,373,62,4606.021275,104.008417,-114.104708,0.059987,218.113125,383,64,1320.554929,77.842402,-66.586094,0.016520,144.428496,365,88,644.526333,119.050757,-110.233784,-0.206649,229.284541,365,75,1314.156385,102.389751,-115.304976,-0.056793,217.694727,386,83,1719.269239,103.909615,-76.910885,-0.178187,180.820500,340,73,1466.666257,72.256784,-76.327361,-0.054593,148.584145,381,85,596.165914,62.087469,-61.142375,-0.034261,123.229844,374,138,344.135954,49.650535,-45.934953,-0.036698,95.585488,368,136,331.776431,86.091016,-81.004561,0.017573,167.095577,378,134,891.815874,59.208624,-59.621309,-0.019102,118.829933,365,133,436.867887,54.274173,-52.861458,-0.020868,107.135632,373,138,352.969332"
        #right-hand
        input_values_str = "48.129675,-44.939561,0.023549,93.069237,389,52,375.808435,92.333089,-85.771823,0.031779,178.104913,369,56,575.043251,63.718674,-61.397702,0.196674,125.116376,376,60,343.072996,53.573664,-61.476891,0.066184,115.050555,383,57,416.117024,51.373097,-52.303290,0.083063,103.676387,368,70,485.758983,51.170592,-53.036384,-0.026014,104.206976,370,96,302.134247,55.511885,-73.992191,-0.072593,129.504075,366,89,352.346796,59.655200,-62.762993,-0.089495,122.418194,371,96,337.525750,49.444859,-46.901086,0.076681,96.345945,365,91,221.764716,73.300005,-77.053522,0.010494,150.353527,378,100,1022.576702,45.880016,-42.713612,0.053832,88.593627,376,142,193.252608,47.617041,-48.902133,-0.001332,96.519174,378,151,170.693600,50.298162,-48.016040,-0.036257,98.314202,381,149,271.916727,40.220938,-40.485277,0.045470,80.706216,375,152,213.717060,77.262105,-73.505444,-0.033440,150.767549,375,158,812.823058,80.621210,-206.201198,-0.581223,286.822409,370,43,944.700604,44.397962,-46.100377,0.135115,90.498339,366,61,308.016150,67.324002,-75.059315,-0.030144,142.383317,368,59,522.589995,46.788856,-41.120110,0.458082,87.908966,383,56,265.943220,46.818248,-44.047759,-0.013697,90.866007,367,65,290.779151,69.925153,-127.261630,-0.563773,197.186782,367,93,266.518190,33.800994,-34.750123,0.034344,68.551117,377,88,166.059188,42.356219,-56.503587,-0.050048,98.859806,368,85,202.542947,34.628343,-38.711171,0.172105,73.339514,386,94,171.090739,46.938948,-49.005639,-0.003878,95.944587,367,99,273.637133,54.910591,-77.886847,-0.165456,132.797439,383,146,132.979685,32.118521,-32.830344,-0.004274,64.948865,379,151,117.031410,32.667869,-32.027948,-0.005277,64.695817,374,149,90.442111,44.882917,-44.795531,0.065918,89.678448,370,149,149.081309,50.254667,-49.147430,-0.008269,99.402097,375,152,261.815004,22.739327,-23.185826,-0.057929,45.925153,369,64,65.225933,29.910969,-36.008792,0.064498,65.919761,360,58,128.183790,29.237238,-23.964223,-0.137229,53.201461,368,60,90.827219,35.198295,-36.573123,0.025369,71.771417,389,62,130.994016,38.306555,-41.259652,-0.009605,79.566207,370,60,207.972628,21.099101,-18.074132,0.052818,39.173233,387,88,40.908657,33.331931,-33.686714,-0.014388,67.018645,361,93,107.244989,21.742787,-23.220824,-0.048246,44.963611,372,89,60.877564,36.853905,-39.890466,-0.018257,76.744371,373,97,124.780034,39.306608,-41.387964,0.042703,80.694573,382,87,178.908514,22.390578,-22.714501,0.033022,45.105079,376,156,46.404348,25.322256,-25.408658,0.002045,50.730914,379,153,64.815491,17.037391,-18.530213,-0.019112,35.567603,378,149,41.352512,25.458563,-26.725398,-0.021057,52.183962,376,152,88.043987,41.909077,-38.308742,0.013746,80.217819,370,155,128.738511,17.925872,-18.598043,0.050343,36.523915,377,65,36.248515,25.469946,-27.539357,0.038037,53.009303,398,59,110.145552,22.972089,-28.807022,0.087392,51.779111,377,60,72.577614,28.538515,-27.756244,-0.031894,56.294759,374,63,89.951093,29.895030,-32.049527,-0.045430,61.944558,392,57,132.362032,13.177890,-13.574203,0.024370,26.752094,377,90,29.194089,24.770622,-22.663559,-0.010608,47.434181,368,91,56.455012,20.591608,-22.957097,0.031542,43.548704,359,93,52.823638,23.348052,-27.365101,-0.007313,50.713152,362,90,67.673051,33.257472,-33.895730,0.044772,67.153202,366,96,123.354918,11.260587,-11.234907,0.012647,22.495493,380,148,14.462190,27.491063,-28.847262,0.008193,56.338325,367,153,69.961625,22.836874,-22.504910,0.005664,45.341784,367,142,51.507756,17.816145,-17.243435,0.015327,35.059580,376,158,44.749143,22.619623,-23.725310,0.026291,46.344932,372,150,70.830928,76.150425,-81.361876,0.003772,157.512301,367,57,1100.045522,75.140040,-72.806234,0.024096,147.946273,371,60,689.542045,83.737476,-84.772269,0.216215,168.509745,384,58,639.081274,70.185025,-63.627399,0.067656,133.812425,379,60,770.813754,87.970996,-80.694479,0.139777,168.665475,373,62,987.533663,84.220130,-77.195153,0.021845,161.415283,364,83,453.128929,45.822377,-47.829830,0.015627,93.652208,397,86,298.895589,63.600364,-58.647185,-0.098043,122.247549,376,92,323.630147,61.795540,-70.970351,-0.188928,132.765891,376,92,373.291113,68.977314,-70.095540,0.176386,139.072854,375,84,463.629231,62.888673,-59.801863,-0.005078,122.690537,375,154,290.749946,26.876041,-26.452131,-0.029018,53.328172,364,140,121.921616,56.519686,-57.563344,-0.048625,114.083030,364,157,296.992226,59.867565,-62.212443,-0.032691,122.080009,371,150,216.022769,60.406911,-61.174089,0.087484,121.581000,368,157,386.751448"
        #tongue
        #input_values_str =
        #null
        #input_values_str =
        input_data = np.array(input_values_str.split(','), dtype=float)
        input_data = input_data.reshape(1, input_data.shape[0], 1) 

        # Load the model
        model = load_model(r"C:\Users\User\Desktop\majorProject\bci3-3a\fcnn.h5")

        # Make predictions
        predictions = model.predict(input_data)

        # Define the reference mapping from one-hot encoded values to action labels
        reference = {
            (0.0, 0.0, 1.0, 0.0, 0.0): "foot",
            (0.0, 0.0, 0.0, 0.0, 1.0): "Left Hand",
            (0.0, 1.0, 0.0, 0.0, 0.0): "No action performed",
            (0.0, 0.0, 0.0, 1.0, 0.0): "Right Hand",
            (1.0, 0.0, 0.0, 0.0, 0.0): "Tongue"
        }

        # Decode the predicted action
        predicted_action = reference[tuple(predictions[0])]
        st.header(f'The predicted action is {predicted_action}')

if __name__ == "__main__":
    main()
